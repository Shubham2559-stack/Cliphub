<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>X ClipHub</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<header class="topbar">
  <div class="wrap">
   <div class="brand">
  <h1><a href="index.html">X ClipHub</a></h1>
</div>
<button class="to-top"><i class="fa-solid fa-arrow-up-long"></i></button>
    <nav class="primary-nav">
      <ul class="nav-list">
        <li><a href="category.html?cat=MMS">MMS</a></li>
        <li><a href="category.html?cat=Models">Models</a></li>
        <li><a href="category.html?cat=Premium">Premium</a></li>
        <li><a href="category.html?cat=Onlyfans">Onlyfans</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="wrap section top-search">
  <div class="search">
    <input type="text" id="searchInput" placeholder="Search...">
    <button id="searchBtn">üîç</button>
  </div>
</section>
<section class="wrap section">
  <div class="section-head">
    <h2 class="bar-title">Latest videos</h2>
    <select id="videoMode" class="mode-select">
      <option value="latest">Latest videos</option>
      <option value="longest">Longest videos</option>
      <option value="random">Random videos</option>
      <option value="most">Most viewed videos</option>
    </select>
  </div>
  <div class="grid" id="latestGrid"></div>
</section>

<section class="wrap section">
  <h3 class="bar-title sm">About</h3>
  <p class="muted">X ClipHub demo layout. All content is managed from Google Sheets.</p>
</section>

<section class="wrap section">
  <div class="section-head"><h2 class="bar-title">Random videos</h2></div>
  <div class="grid" id="randomGrid"></div>
</section>

<footer class="footer">
  <div class="wrap">
    <div class="links">
      <a href="sources.html">Video Sources</a>
      <a href="privacy.html">Privacy</a>
      <a href="dmca.html">DMCA</a>
      <a href="contact.html">Contact</a>
    </div>
    <p class="muted small">All Rights Reserved</p>
  </div>
</footer>


<template id="cardTpl">
<article class="card">
  <div class="thumb">
    <a href="#"><img loading="lazy" src="" alt=""></a>
    <span class="badge">‚ñ∂ <b class="dur">00:00</b></span>
  </div>
  <a class="title" href="#">Clip</a>
  <span class="views small muted"><svg class="eye" viewBox="0 0 24 24"><path d="M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7zm0 11a4 4 0 110-8 4 4 0 010 8z"/></svg> <b class="view-count">0</b> views</span>
</article>
</template>
<script src="main.js" defer></script>

<!-- ========== POPUNDER CONTROL (one per hour) ========== -->
<script>
(function() {
  const POP_KEY = "popupActivatedAt";
  const ONE_HOUR = 60 * 60 * 1000; // 1 hour in ms

  function getLastTime() {
    try { return parseInt(localStorage.getItem(POP_KEY), 10) || 0; }
    catch (e) { return 0; }
  }

  function setLastTime(t) {
    try { localStorage.setItem(POP_KEY, String(t)); }
    catch (e) {}
  }

  function canTriggerPopup() {
    const last = getLastTime();
    return (!last) || (Date.now() - last) > ONE_HOUR;
  }

  function loadPopupScript() {
    // your provided pop script wrapper (zone 10163330)
    const s = document.createElement("script");
    s.dataset.zone = '10163330';
    s.src = 'https://al5sm.com/tag.min.js';
    s.async = true;
    document.body.appendChild(s);
    setLastTime(Date.now());
    // optional: console log for debugging
    console.log("Popunder script loaded (controlled)");
  }

  // Trigger on meaningful user interactions (only if allowed by cooldown)
  // 1) Click anywhere
  document.addEventListener("click", function onClickOnce() {
    if (canTriggerPopup()) loadPopupScript();
  }, { passive: true });

  // 2) Search button click
  const searchBtn = document.getElementById("searchBtn");
  if (searchBtn) {
    searchBtn.addEventListener("click", function() {
      if (canTriggerPopup()) loadPopupScript();
    }, { passive: true });
  }

  // 3) As a fallback, trigger on first user-initiated play event (video)
  document.addEventListener("play", function(e) {
    if (e.target && e.target.tagName === "VIDEO") {
      if (canTriggerPopup()) loadPopupScript();
    }
  }, true);

})();
</script>
<!-- ========== END POPUNDER CONTROL ========== -->

<button class="to-top"><i class="fa-solid fa-arrow-up-long"></i></button>
</body>
</html>
